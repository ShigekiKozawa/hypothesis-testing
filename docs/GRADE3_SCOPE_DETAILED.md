# 統計検定3級 出題範囲詳細仕様書

**最終更新日**: 2025年12月20日

## 📋 目次

1. [概要](#概要)
2. [重点領域（採用度を増やす）](#重点領域採用度を増やす)
3. [セクション別出題範囲](#セクション別出題範囲)
4. [絶対に出題してはいけない範囲](#絶対に出題してはいけない範囲)
5. [問題形式の制約](#問題形式の制約)
6. [グラフ・チャートの使用基準](#グラフチャートの使用基準)

---

## 概要

統計検定3級は、データの整理・要約から推測統計の基礎まで、実務で使える統計的思考力を評価する試験です。

### 3級の全体出題範囲

- 標準偏差、分散、変動係数の計算と解釈
- 相関係数、共分散の計算と散布図の読み取り
- 線形単回帰分析（回帰式、決定係数、残差、予測値の計算）※重回帰分析は範囲外
- 確率分布（二項分布の基本計算）
- 標本分布と中心極限定理の概念
- 信頼区間の概念と計算
- 仮説検定の基本（帰無仮説、対立仮説、p値、有意水準、検定結果の解釈）
- 実験計画の基礎（無作為化、対応のあるデータ）
- 標本調査の基礎（母集団・標本の定義、無作為抽出の重要性）
- データの変換（1次変換、標準化）が統計量に与える影響
- 外れ値の性質と影響
- クロス集計表の読解と計算

### 問題構成

本アプリでは3級の全140問（14セクション×10問）を以下の構成で管理：

| セクション | サブセクション | 問題数 |
|----------|--------------|--------|
| Section 1: 記述統計とグラフ読解 | 3 | 30問 |
| Section 2: 散布図・相関・単回帰分析 | 3 | 30問 |
| Section 3: データの変換と統計量 | 2 | 20問 |
| Section 4: 確率分布 | 2 | 20問 |
| Section 5: 推測統計の基礎 | 2 | 20問 |
| Section 6: クロス集計表・実験計画・標本調査 | 2 | 20問 |
| **合計** | **14** | **140問** |

---

## 重点領域（採用度を増やす）

以下の5つの領域は、受験者の失点が特に多い分野です。**問題生成時にこれらのトピックの採用度を増やし**、各セクションで優先的に出題してください。

### 🔴 重点1: 記述統計の「性質」を問う問題

**失点理由**: 計算はできるが、統計量の性質や意味の理解が不足している。

#### 1-1. 代表値の性質（平均・中央値・最頻値）

**重点問題パターン**:
- **外れ値の影響**: 外れ値がある場合、平均値は大きく影響を受けるが、中央値は影響を受けにくい
  - 問題例：「データ{10, 20, 30, 40, 500}について、データの中心を表すのに最も適切な代表値はどれか」
  
- **ヒストグラムの形状と代表値**: ヒストグラムの形状（左右非対称など）から、平均・中央値・最頻値の大小関係を推測する
  - 問題例：「右に裾が長いヒストグラムでは、平均・中央値・最頻値の大小関係はどうなるか」
  - 解答：最頻値 < 中央値 < 平均（右に外れ値があると平均が引っ張られる）

#### 1-2. ばらつきの指標の性質

**重点問題パターン**:
- **分散の公式の活用**:
  $$\text{分散} = \frac{\text{観測値の2乗和}}{\text{サンプルサイズ}} - (\text{平均値})^2$$
  - 問題例：「5個のデータの2乗和が500、平均が8のとき、分散はいくらか」
  - 計算：500/5 - 8² = 100 - 64 = 36

- **変動係数（CV）の活用**:
  $$\text{変動係数} = \frac{\text{標準偏差}}{\text{平均値}}$$
  - 問題例：「製品Aの重量は平均100g、標準偏差5g。製品Bの重量は平均500g、標準偏差20g。どちらが相対的に散らばりが大きいか」
  - 計算：CV_A = 5/100 = 0.05、CV_B = 20/500 = 0.04 → Aの方が相対的に散らばりが大きい

#### 1-3. 四分位範囲と箱ひげ図

**重点問題パターン**:
- **第1四分位数（Q1 = 25%）、第3四分位数（Q3 = 75%）の求め方**
  - 問題例：「データを小さい順に並べたとき、25%目の値はどこにあるか」
  
- **累積相対度数グラフからの読み取り**
  - 問題例：「累積相対度数グラフで0.5に対応する値（中央値）を読み取れ」
  - 問題例：「累積相対度数グラフで0.25と0.75に対応する値（Q1、Q3）から四分位範囲を計算せよ」

**出題頻度**: 各サブセクションで最低2-3問は含める

---

### 🔴 重点2: 2変数の関係（相関と散布図）

**失点理由**: 相関係数の計算方法と性質の理解が不十分。相関と因果の区別ができない。

#### 2-1. 相関係数（r）の計算

**重点問題パターン**:
- **共分散の定義と計算**:
  $$\text{共分散} = \frac{1}{n}\sum_{i=1}^{n}(x_i - \bar{x})(y_i - \bar{y})$$
  - 問題例：「2変数の偏差の積の平均が30、xの標準偏差が5、yの標準偏差が6のとき、相関係数はいくらか」
  - 計算：r = 30 / (5 × 6) = 0.5

- **相関係数の公式**:
  $$r = \frac{\text{共分散}}{\sqrt{x\text{の分散}} \times \sqrt{y\text{の分散}}}$$
  - 問題例：「共分散が24、xの分散が16、yの分散が36のとき、相関係数を求めよ」
  - 計算：r = 24 / (√16 × √36) = 24 / (4 × 6) = 1

#### 2-2. 相関係数の性質

**重点問題パターン**:
- **散布図と相関係数の対応**:
  - 問題例：「散布図に直線的な傾向がない場合、相関係数rはどうなるか」
  - 解答：r ≈ 0（無相関）

- **相関と因果の区別**:
  - 問題例：「アイスクリームの売上と水難事故の件数に強い正の相関が見られた。これは因果関係と言えるか」
  - 解答：言えない（第三の変数「気温」が両方に影響している疑似相関）

#### 2-3. 変量の変換と相関

**重点問題パターン**:
- **1次変換と相関係数**:
  - データを一律にa倍したり、bを足したりしても、相関係数の**絶対値**は変わらない
  - 問題例：「xとyの相関係数が0.8のとき、x'=2x+3、y'=y-5とすると、x'とy'の相関係数はいくらか」
  - 解答：0.8（変わらない）

- **符号の反転**:
  - 問題例：「xとyの相関係数が0.6のとき、x'=24-x、y'=yとすると、x'とy'の相関係数はいくらか」
  - 解答：-0.6（マイナスをかけると符号が反転）

**出題頻度**: Section 2の各サブセクションで最低3-4問は含める

---

### 🔴 重点3: データの変換（1次変換）

**失点理由**: 1次変換が各統計量にどう影響するかの理解が不足している。

#### 3-1. 1次変換の影響（Y = aX + b）

**重点問題パターン**:
- **平均値**: a倍してbを足すと、平均も**a倍してb足される**
  - 問題例：「データの平均が50のとき、全員に2倍して10点足すと、新しい平均はいくらか」
  - 計算：50 × 2 + 10 = 110

- **標準偏差**: bを足しても変わらないが、a倍すると標準偏差も**|a|倍**になる
  - 問題例：「標準偏差が8のデータを全員3倍すると、新しい標準偏差はいくらか」
  - 計算：8 × 3 = 24

- **分散**: a倍すると分散は**a²倍**になる
  - 問題例：「分散が16のデータを全員2倍すると、新しい分散はいくらか」
  - 計算：16 × 2² = 16 × 4 = 64

#### 3-2. 偏差値（標準得点）の不変性

**重点問題パターン**:
- **偏差値の公式**:
  $$\text{偏差値} = 50 + 10 \times \frac{\text{得点} - \text{平均}}{\text{標準偏差}}$$
  - 問題例：「平均60点、標準偏差10点のテストで70点を取った生徒の偏差値はいくらか」
  - 計算：50 + 10 × (70-60)/10 = 50 + 10 = 60

- **1次変換と偏差値**:
  - 問題例：「全員に同じ1次変換（a倍してb足す）を施したとき、個人の偏差値はどうなるか」
  - 解答：変わらない（平均と標準偏差が同じ変換を受けるため、偏差得点は不変）

**出題頻度**: Section 3の各サブセクションで最低4-5問は含める

---

### 🔴 重点4: 確率と時系列

**失点理由**: 反復試行や条件付き確率の計算パターンが定着していない。幾何平均の概念が不明瞭。

#### 4-1. 反復試行の確率

**重点問題パターン**:
- **n回中k回起こる確率**:
  $$P(X=k) = {}_n\mathrm{C}_k \cdot p^k \cdot (1-p)^{n-k}$$
  - 問題例：「成功確率0.3の試行を10回行ったとき、成功が3回である確率はどの式で表されるか」
  - 解答：${}_{10}\mathrm{C}_3 \cdot 0.3^3 \cdot 0.7^7$

#### 4-2. 条件付き確率

**重点問題パターン**:
- **条件付き確率の公式**:
  $$P(B|A) = \frac{P(A \cap B)}{P(A)}$$
  - 問題例：「サイコロを振って偶数が出た（事象A）とき、その数が4以上である（事象B）確率はいくらか」
  - 計算：P(A) = 3/6 = 1/2、P(A∩B) = 2/6 = 1/3（4と6）、P(B|A) = (1/3) / (1/2) = 2/3

#### 4-3. 時系列データと幾何平均

**重点問題パターン**:
- **幾何平均（相乗平均）の使用場面**:
  - 年度比（倍率）の平均を出すときは算術平均ではなく幾何平均を使う
  - 問題例：「ある商品の売上が1年目1.2倍、2年目1.5倍、3年目0.8倍になった。3年間の平均成長率はいくらか」
  - 計算：$\sqrt[3]{1.2 \times 1.5 \times 0.8} = \sqrt[3]{1.44} \approx 1.13$（約13%増）

- **実戦的な解法**:
  - n乗根を直接計算するよりも、**選択肢をn乗して比較**する手法が実戦的
  - 問題例：「3年間の平均成長率の選択肢が1.1、1.13、1.15、1.2のとき、どれが正しいか」
  - 解法：各選択肢を3乗して1.44に最も近いものを選ぶ

#### 4-4. 移動平均

**重点問題パターン**:
- **移動平均の仕組み**:
  - データの平滑化の仕組みと、グラフ上でのズレ（1日目は計算できない等）の理解
  - 問題例：「3日移動平均を計算する場合、最初に平均が計算できるのは何日目か」
  - 解答：3日目（1〜3日目の平均）

**出題頻度**: Section 4の各サブセクションで最低3-4問は含める

---

### 🔴 重点5: 調査・実験・公的統計

**失点理由**: 用語の定義が不正確。無作為抽出の条件を理解していない。

#### 5-1. 標本調査の用語

**重点問題パターン**:
- **母集団**: 調査対象の全体
  - 問題例：「ある市の全住民10万人の平均所得を調べるために1000人を抽出した。母集団は何か」
  - 解答：10万人の住民全体

- **標本の大きさ（n）**: 標本に含まれる個体数
  - 問題例：「上記の例で、標本の大きさはいくらか」
  - 解答：n = 1000

#### 5-2. 抽出方法（無作為抽出）

**重点問題パターン**:
- **無作為抽出の定義**: どの個体も選ばれる確率が等しい状態（くじ引きや乱数表）
  - 問題例：「次のうち、無作為抽出と言えるのはどれか」
    1. 学校の1組だけを選ぶ ← ✗（特定のクラスだけ選ぶのは無作為ではない）
    2. 全生徒に番号を振り、乱数表で選ぶ ← ✓（正解）
    3. 手を挙げた人だけ選ぶ ← ✗（自己選択バイアス）
    4. 先生が適当に選ぶ ← ✗（恣意的）

#### 5-3. 実験計画法

**重点問題パターン**:
- **比較の原則**: 比較したい要因（肥料など）以外はすべて**条件を揃える**のが鉄則
  - 問題例：「新しい肥料の効果を検証するために、異なる畑で異なる時期に実験を行った。この実験の問題点は何か」
  - 解答：条件が揃っていない（畑の土壌、時期の気候が異なる）

#### 5-4. 公的統計

**重点問題パターン**:
- **主要な公的統計の管轄省庁**:
  - 家計調査、国勢調査、労働力調査 → **総務省**
  - 問題例：「国勢調査を管轄する省庁はどこか」
  - 解答：総務省

**出題頻度**: Section 6の各サブセクションで最低4-5問は含める

---

## セクション別出題範囲

### Section 1: 記述統計とグラフ読解（30問）

#### 1-1. ヒストグラムと箱ひげ図（10問）

**出題内容**
- ヒストグラムから中央値や平均値が含まれる階級を読み取る問題
- 箱ひげ図から四分位範囲（IQR）、最小値、最大値を読み取る問題
- 複数のグラフを比較して分布の特徴（散らばり、対称性）を判断する問題
- 5数要約（最小値、Q1、中央値、Q3、最大値）の計算と解釈
- 外れ値の判定（IQRの1.5倍ルール）

**必須要件**
- すべての問題に図表（ヒストグラムまたは箱ひげ図）を含める
- 実際の状況設定（例：「A中学校30人の数学のテスト」）を必ず含める

**注意事項**
- 箱ひげ図の5数要約の値が近すぎて潰れないように、適度な範囲を持たせる
  - 悪い例：`{min: 9.8, q1: 10.2, median: 10.5, q3: 10.8, max: 11.2}`（差が小さすぎ）
  - 良い例：`{min: 48, q1: 62, median: 70, q3: 78, max: 92}`（視覚的に明瞭）

#### 1-2. 度数分布表と統計量計算（10問）

**出題内容**
- 度数分布表から平均値を計算する問題（階級値を使用）
- 度数分布表から中央値が含まれる階級を特定する問題
- 累積度数・累積相対度数を計算する問題
- 度数分布表とヒストグラムの対応関係を問う問題
- 相対度数の計算と解釈

**必須要件**
- 度数分布表は必ず提示（chartTypeは不要、表形式で問題文に記載）
- 階級、度数、相対度数、累積度数などを含む表を使用

#### 1-3. 幹葉図と外れ値（10問）

**出題内容**
- 幹葉図から中央値、範囲、四分位数を読み取る問題
- 外れ値がデータに与える影響（平均値への影響など）を問う問題
- データを変換（1次変換）したときの統計量の変化を問う問題
- 幹葉図と箱ひげ図の対応関係

**必須要件**
- 幹葉図や箱ひげ図を含める
- 外れ値の影響を視覚的に確認できるデータ設定

---

### Section 2: 散布図・相関・単回帰分析（30問）

#### 2-1. 散布図と相関係数（10問）

**出題内容**
- 散布図から相関の強さ（強い・中程度・弱い）と方向（正・負）を判断する問題
- 相関係数の値（r）を推定する問題
- 外れ値が相関係数に与える影響を問う問題
- 共分散の計算と相関係数との関係
- 相関と因果関係の違い（疑似相関の理解）

**必須要件**
- すべての問題に散布図を含める
- 軸ラベルは具体的な文脈に合わせる
  - ❌ 悪い例：`x: "X", y: "Y"`（抽象的）
  - ✅ 良い例：`x: "勉強時間(時間)", y: "テスト得点(点)"`

**相関係数の解釈基準**
- `|r| > 0.7`：強い相関
- `0.4 < |r| < 0.7`：中程度の相関
- `|r| < 0.4`：弱い相関

#### 2-2. 線形単回帰分析（10問）

**出題内容**
- 散布図と回帰式から予測値を計算する問題（例：y = 2x + 3でx=5のときyは？）
- 決定係数（R²）を解釈する問題（例：R²=0.81は何を意味するか）
- 残差の意味を問う問題（実測値 - 予測値）
- 回帰直線の傾きと切片の意味
- 回帰分析の前提条件（線形関係、等分散性など）

**必須要件**
- 可能な限り散布図を含める
- 軸ラベルは「説明変数X」「目的変数Y」など回帰分析の文脈に合わせる

**禁止事項**
- ❌ 重回帰分析（複数の説明変数）は3級の範囲外

#### 2-3. データ変換と相関（10問）

**出題内容**
- 1次変換（ax + b）が相関係数に与えない影響（相関係数は不変）
- 単位変換（例：cm → m）と相関係数の関係
- 共分散の計算問題
- 標準化（z得点化）と相関係数の関係

**必須要件**
- 具体的なデータ変換のシナリオを含める
- 散布図は必要に応じて含める（変換前後の比較など）

---

### Section 3: データの変換と統計量（20問）

#### 3-1. 1次変換の影響（10問）

**出題内容**
- 1次変換（Y = aX + b）が平均値に与える影響（平均も同じ変換）
- 1次変換が標準偏差に与える影響（標準偏差は|a|倍）
- 1次変換が分散に与える影響（分散はa²倍）
- 偏差値の計算問題（偏差値 = 10 × (得点 - 平均) / 標準偏差 + 50）
- 標準化（z得点化）の計算問題（z = (X - 平均) / 標準偏差）

**必須要件**
- 具体的なデータセットを提示して計算させる
- chartTypeは不要（計算問題のため）

**問題例**
- 「あるクラスの数学のテストの平均は60点、標準偏差は10点です。70点を取った生徒の偏差値はいくつですか」
- 「データ{10, 20, 30}を2倍にしたとき、標準偏差はどうなりますか」

#### 3-2. 変動係数と統計量の比較（10問）

**出題内容**
- 変動係数（CV）の計算（CV = 標準偏差 / 平均）
- 平均が異なるデータセット間の散らばりの比較（変動係数を使用）
- 偏差値の計算問題（追加）
- 標準化の応用問題
- 1次変換と変動係数の関係

**必須要件**
- 実際のデータセット（例：製品Aと製品Bの品質比較）を使用
- chartTypeは不要（計算問題のため）

**問題例**
- 「製品Aの重量：平均100g、標準偏差5g。製品Bの重量：平均500g、標準偏差20g。どちらが相対的に散らばりが大きいですか」

---

### Section 4: 確率分布（20問）

#### 4-1. 確率の基礎計算（10問）

**出題内容**
- 基本的な確率計算（サイコロ、コイン、くじ引き）
- 独立事象の確率（乗法定理：P(A∩B) = P(A) × P(B)）
- 条件付き確率の計算
- 余事象の確率（P(A') = 1 - P(A)）
- 期待値の計算

**必須要件**
- 具体的なシチュエーション（例：「箱の中に赤玉5個、白玉3個」）
- chartTypeは不要（計算問題のため）

**禁止事項**
- ❌ ベイズの定理は3級の範囲外

#### 4-2. 二項分布（10問）

**出題内容**
- 二項分布の期待値の計算（E[X] = np）
- 二項分布の分散の計算（V[X] = np(1-p)）
- 二項分布の標準偏差の計算（√np(1-p)）
- 具体的な確率計算（例：「成功確率0.3の試行を10回行ったとき、成功が3回である確率」）
- 二項分布の正規分布近似（nが大きいとき）

**必須要件**
- 実際の状況設定（例：「不良品率2%の製品から100個抽出」）
- chartTypeは不要（計算問題のため）

---

### Section 5: 推測統計の基礎（20問）

#### 5-1. 標本分布と信頼区間（10問）

**出題内容**
- 標本平均の期待値（母平均に等しい）の計算
- 標本平均の分散（σ²/n）の計算
- 標準誤差（SE = σ/√n）の計算
- サンプルサイズと標準誤差の関係
- 中心極限定理の応用（標本サイズが大きいとき、標本平均は正規分布に従う）
- 信頼区間の計算問題（95%、99%など）
- 信頼区間の解釈（「真の値が含まれる確率」ではなく「同じ方法で繰り返したときに真の値が含まれる割合」）

**必須要件**
- 具体的な数値を使った計算問題
- chartTypeは不要（計算・判断問題のため）

**注意事項**
- 信頼区間を直接求める問題は少なく、信頼区間を使った判断問題が主流
  - 例：「信頼区間が[46.08, 53.92]のとき、帰無仮説μ=48を有意水準5%で検定するとどう判断されますか」

**禁止事項**
- ❌ t分布を用いた具体的な検定手順は範囲外（概念のみ）
- ❌ 不偏分散（n-1で割る分散）の詳細は範囲外

#### 5-2. 仮説検定の基礎（10問）

**出題内容**
- 帰無仮説（H0）と対立仮説（H1）の設定
- p値の解釈（例：「p=0.03のとき有意水準5%で有意か」）
- 有意水準（α）の意味（例：5%、1%）
- 信頼区間を用いた仮説検定の判断
  - 例：「95%信頼区間が[2.34kg, 4.06kg]で帰無仮説μ=0を有意水準5%で検定すると？」
- 検定結果の解釈（棄却する/棄却できない）

**必須要件**
- 具体的なシチュエーション（例：「新しいダイエット法の効果検証」）
- chartTypeは不要（判断問題のため）

**禁止事項**
- ❌ 第一種・第二種の過誤（Type I/II Error）は範囲外
- ❌ 検出力（power）は範囲外
- ❌ t検定、F検定、カイ二乗検定の具体的な手順は範囲外（概念のみ言及可）

**重要な出題パターン**
- 信頼区間に基づく判断問題が主流
- p値に基づく判断問題
- 概念を直接問う問題は禁止（例：「p値とは何か」）

---

### Section 6: クロス集計表・実験計画・標本調査（20問）

#### 6-1. クロス集計表の読解（10問）

**出題内容**
- クロス集計表の作成と読み取り
- 行パーセント・列パーセントの計算
- 条件付き確率の計算（例：「男性の中で賛成の割合」）
- 2変数の関係性の分析（独立性の判断）

**必須要件**
- クロス集計表を必ず提示（表形式で問題文に記載）
- chartTypeは不要（表の読解問題のため）

**禁止事項**
- ❌ カイ二乗検定の具体的な計算手順は範囲外（独立性の概念のみ）

#### 6-2. 実験計画と標本調査（10問）

**出題内容**
- 母集団と標本の概念（定義と識別）
- 無作為抽出の重要性
- 無作為化（ランダム化）の目的（交絡因子の影響を減らす）
- 対応のあるデータと対応のないデータの区別
- 実験計画の基本（対照群と実験群、無作為割り当て）
- バイアスの種類と回避方法（選択バイアス、測定バイアスなど）

**必須要件**
- 具体的な実験・調査のシナリオを含める
- chartTypeは不要（実験計画・調査デザインの問題のため）

**禁止事項**
- ❌ 多重比較の詳細な手法は範囲外

---

## 絶対に出題してはいけない範囲

以下のトピックは統計検定3級の範囲外であり、**絶対に問題に含めてはいけません**。

### 禁止トピック一覧

| トピック | 理由 |
|---------|------|
| **第一種・第二種の過誤（Type I/II Error）** | 3級では出題されない（2級以上） |
| **t検定（t分布を用いた具体的な検定手順）** | 手順の詳細は範囲外（概念のみ） |
| **F検定（F分布を用いた具体的な検定手順）** | 手順の詳細は範囲外（概念のみ） |
| **カイ二乗検定（χ²検定の具体的な計算手順）** | 手順の詳細は範囲外（独立性の概念のみ） |
| **ベイズの定理とベイズ統計** | 3級では出題されない |
| **多重比較の詳細な手法** | 概念のみ（Bonferroni補正などの詳細は範囲外） |
| **ノンパラメトリック検定の詳細** | 3級では出題されない |
| **重回帰分析** | 単回帰分析のみ出題（複数の説明変数は範囲外） |
| **分散分析（ANOVA）の詳細な計算** | 3級では出題されない |
| **不偏分散の詳細** | n-1で割る理由の詳細は範囲外 |
| **偏相関係数** | 3級では出題されない（単相関のみ） |
| **検出力（power）** | 3級では出題されない |

### 出題可能な範囲との境界線

| トピック | 出題可 ✅ | 出題不可 ❌ |
|---------|----------|-----------|
| 仮説検定 | 帰無仮説・対立仮説・p値・有意水準の概念、信頼区間を使った判断 | 第一種・第二種の過誤、検出力 |
| 検定手法 | t検定・F検定・カイ二乗検定の**概念**（「2群の平均を比較する検定は？」程度） | 具体的な計算手順（t値の計算、自由度の決定など） |
| 回帰分析 | 単回帰分析（1つの説明変数） | 重回帰分析（複数の説明変数） |
| 相関 | 単相関係数、共分散 | 偏相関係数 |
| 分散 | 標本分散（nで割る） | 不偏分散（n-1で割る）の詳細な理由 |

---

## 問題形式の制約

### 必須の問題形式（2種類のみ）

統計検定3級では、以下の2形式のみが出題されます：

1. **📊 表やグラフを読み取る問題（60-70%）**
   - ヒストグラム、箱ひげ図、散布図、度数分布表などを提示
   - そこから値を読み取らせる
   - 例：「下のヒストグラムから中央値が含まれる階級を答えよ」

2. **🔢 データから計算する問題（30-40%）**
   - 具体的な数値データを提示（例：`{60, 70, 80, 85, 85}`）
   - 平均値、中央値、標準偏差などを計算させる
   - 例：「データ{2, 4, 6, 8, 10}の標準偏差を求めよ」

### 絶対に作成してはいけない問題形式

以下の形式は**絶対に禁止**です：

#### ❌ 概念問題（最重要禁止事項）

- 「標準偏差とは何か」
- 「変動係数の意味として適切なものはどれか」
- 「p値とは何か」
- 「～の性質として正しいものは」
- 「～の意味として適切なものは」
- 公式や定理の名称を選ぶ問題

#### ❌ 指示語を含む問題文

- 「次の」「以下の」「上記の」「下記の」などの指示語は使用禁止
- 理由：図表は問題文の下に表示されるため、指示語は不要

#### ❌ シチュエーションのない抽象的な問題

- 必ず具体的な状況設定を含める
- ✅ 良い例：「あるクラス30人のテストの点数」
- ❌ 悪い例：「ある変数Xについて」

### 必須要件

#### 🎯 具体的なシチュエーション（状況設定）

すべての問題に以下のような具体的な状況を含める：

- 「A中学校3年1組30人の数学のテスト」
- 「ある工場で製造される部品の重量（母平均μ=100g、母標準偏差σ=8g）」
- 「新しいダイエット法の効果を検証するため、30人を対象に実験」
- 「製品の不良発生率が2%」

#### 📐 分数は必ず既約分数で表記

- ✅ 正しい：`1/2`, `2/3`, `3/5`
- ❌ 誤り：`2/4`, `4/6`, `6/10`

---

## グラフ・チャートの使用基準

### chartTypeとデータフィールドが必要な問題

以下のタイプの問題では、`chartType`と対応するデータフィールドを**必ず含める**：

| 問題タイプ | chartType | 必要なデータフィールド | 軸ラベル例 |
|-----------|-----------|---------------------|----------|
| ヒストグラム読解 | `histogram` | `barData: [{name, value}, ...]` | `{x: "階級", y: "度数"}` |
| 箱ひげ図読解 | `boxplot` | `boxPlotData: {min, q1, median, q3, max}` | - |
| 散布図読解 | `scatter` | `chartData: [{x, y}, ...]` | `{x: "勉強時間(時間)", y: "テスト得点(点)"}` |
| 回帰分析 | `scatter` | `chartData: [{x, y}, ...]` | `{x: "説明変数X", y: "目的変数Y"}` |
| 折れ線グラフ | `line` | `chartData: [{name, value}, ...]` | `{x: "月", y: "売上(万円)"}` |
| 棒グラフ | `bar` | `barData: [{name, value}, ...]` | `{x: "カテゴリー", y: "値"}` |

### chartTypeが不要な問題

以下のタイプの問題では、`chartType`、`chartData`、`barData`、`boxPlotData`、`chartLabels`を**一切含めない**：

| 問題タイプ | 理由 | 例 |
|-----------|------|---|
| 確率計算 | 計算問題のため図表不要 | 「サイコロを2回振って両方3以上の確率」 |
| データ変換（1次変換、標準化） | 計算問題のため図表不要 | 「データを2倍にしたとき標準偏差は？」 |
| 推測統計（信頼区間、仮説検定の判断） | 判断問題のため図表不要 | 「p=0.03のとき有意水準5%で帰無仮説を棄却するか」 |
| 変動係数の計算 | 計算問題のため図表不要 | 「平均50、標準偏差10のとき変動係数は？」 |
| 度数分布表の読解 | 表形式で問題文に記載 | 「次の度数分布表から平均値を計算せよ」 |
| クロス集計表の読解 | 表形式で問題文に記載 | 「次のクロス集計表から行パーセントを計算せよ」 |
| 実験計画・標本調査 | デザインに関する問題のため図表不要 | 「無作為化の目的は何か」 |

### 軸ラベルの命名規則

#### ✅ 良いラベル（具体的）

- 散布図：
  - `{x: "勉強時間(時間)", y: "テスト得点(点)"}`
  - `{x: "身長(cm)", y: "体重(kg)"}`
  - `{x: "気温(℃)", y: "アイス売上(個)"}`

- 回帰分析：
  - `{x: "説明変数X", y: "目的変数Y"}`

- 一般的な散布図：
  - `{x: "変数X", y: "変数Y"}`

- データ変換：
  - `{x: "変数X（分→秒変換）", y: "変数Y"}`

#### ❌ 悪いラベル（抽象的）

- `{x: "X", y: "Y"}`（抽象的すぎ）
- `{x: "Category", y: "Value"}`（英語で意味が不明瞭）

### 条件付きチャートレンダリング

UIレイヤー（`ExamLayout.tsx`）では、以下の条件でチャートを表示：

```typescript
const shouldRenderChart = (question: Question): boolean => {
  if (!question.chartType) return false;
  
  const chartKeywords = [
    'ヒストグラム', '箱ひげ図', '散布図', '折れ線グラフ', '棒グラフ',
    '度数分布', '累積相対度数', '図', '表'
  ];
  
  return chartKeywords.some(keyword => question.question.includes(keyword));
};
```

**意図**：問題文に図表への言及がない場合、たとえ`chartType`が設定されていてもチャートを表示しない（不要な背景グラフの防止）。

---

## 運用ルール

### ファクトチェックの実施

問題生成後は必ず以下のスクリプトを実行して整合性を確認：

```bash
node scripts/checkAndFixAnswers.js
```

このスクリプトは以下を自動チェック：
- `correct`インデックスと`explanation`の整合性
- 選択肢の重複チェック
- 分数の既約化チェック

### AI生成時の注意

- `src/utils/geminiClient.ts`のプロンプトは、このドキュメントと整合させる
- `.cursor/rules/ai-question-rules.mdc`にもルールを記載し、AI Assistantに参照させる
- 新しいトピックを追加する前に、必ず「絶対に出題してはいけない範囲」を確認

---

## 参考資料

- [統計検定公式サイト](https://www.toukei-kentei.jp/)
- [統計検定3級出題範囲表](https://www.toukei-kentei.jp/about/grade3/)
- `docs/PROJECT_RULES.md` - プロジェクト全体のルール
- `.cursor/rules/ai-question-rules.mdc` - AI生成ルール
- `docs/HOW_TO_GENERATE_QUESTIONS.md` - 問題生成手順

---

**最終更新**: 2025年12月20日  
**管理者**: 統計検定Toppa!開発チーム

